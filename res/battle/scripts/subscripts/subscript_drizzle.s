    .include "macros/btlcmd.inc"

    .data

_000:
	CompareVarToValue OPCODE_EQU, BTLVAR_MOVE_TEMP, MOVE_FLING, _010
	CheckAbility CHECK_HAVE, BTLSCR_MSG_TEMP, ABILITY_FORECAST, _020
    PlayBattleAnimation BTLSCR_PLAYER, BATTLE_ANIMATION_WEATHER_RAIN
    Wait
    // {0}â€™s {1} made it rain!
    PrintMessage pl_msg_00000368_00619, TAG_NICKNAME_ABILITY, BTLSCR_MSG_TEMP, BTLSCR_MSG_BATTLER_TEMP
    Wait 
    WaitButtonABTime 30
    UpdateVar OPCODE_FLAG_OFF, BTLVAR_FIELD_CONDITIONS, FIELD_CONDITION_WEATHER
    UpdateVar OPCODE_FLAG_ON, BTLVAR_FIELD_CONDITIONS, FIELD_CONDITION_RAINING_TEMP
    UpdateVar OPCODE_SET, BTLVAR_WEATHER_TURNS, 5
    CheckItemHoldEffect CHECK_NOT_HAVE, BTLSCR_ATTACKER, HOLD_EFFECT_EXTEND_RAIN, _035
    GetItemEffectParam BTLSCR_ATTACKER, BTLVAR_CALC_TEMP
    UpdateVarFromVar OPCODE_ADD, BTLVAR_WEATHER_TURNS, BTLVAR_CALC_TEMP
	End

_010:
	CompareVarToValue OPCODE_FLAG_SET, BTLVAR_FIELD_CONDITIONS, FIELD_CONDITION_RAINING, _035
	PlayBattleAnimation BTLSCR_PLAYER, BATTLE_ANIMATION_WEATHER_RAIN
    Wait
	// It started to rain!
    PrintMessage pl_msg_00000368_00799, TAG_NONE
    Wait 
    WaitButtonABTime 30
    UpdateVar OPCODE_FLAG_OFF, BTLVAR_FIELD_CONDITIONS, FIELD_CONDITION_WEATHER
    UpdateVar OPCODE_FLAG_ON, BTLVAR_FIELD_CONDITIONS, FIELD_CONDITION_RAINING_TEMP
    UpdateVar OPCODE_SET, BTLVAR_WEATHER_TURNS, 5
    CheckItemHoldEffect CHECK_NOT_HAVE, BTLSCR_ATTACKER, HOLD_EFFECT_EXTEND_RAIN, _035
    GetItemEffectParam BTLSCR_ATTACKER, BTLVAR_CALC_TEMP
    UpdateVarFromVar OPCODE_ADD, BTLVAR_WEATHER_TURNS, BTLVAR_CALC_TEMP
	End
	
_020:
    // Todays forecast is Rainy!
    PrintMessage pl_msg_00000368_01316, TAG_NONE
    Wait 
    WaitButtonABTime 30
	PlayBattleAnimation BTLSCR_PLAYER, BATTLE_ANIMATION_WEATHER_RAIN
    Wait
    UpdateVar OPCODE_FLAG_OFF, BTLVAR_FIELD_CONDITIONS, FIELD_CONDITION_WEATHER
    UpdateVar OPCODE_FLAG_ON, BTLVAR_FIELD_CONDITIONS, FIELD_CONDITION_RAINING_TEMP
    UpdateVar OPCODE_SET, BTLVAR_WEATHER_TURNS, 5
    CheckItemHoldEffect CHECK_NOT_HAVE, BTLSCR_ATTACKER, HOLD_EFFECT_EXTEND_RAIN, _035
    GetItemEffectParam BTLSCR_ATTACKER, BTLVAR_CALC_TEMP
    UpdateVarFromVar OPCODE_ADD, BTLVAR_WEATHER_TURNS, BTLVAR_CALC_TEMP
	End
	
_035:
    End
